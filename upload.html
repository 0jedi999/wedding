<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>แนบสลิป</title>

<style>
body {
  font-family: sans-serif;
  max-width: 420px;
  margin: auto;
  padding: 20px;
}

.upload-box {
  width: 100%;
  height: 450px;
  border: 2px dashed #ccc;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.upload-text {
  color: #666;
}

.preview-image {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: none;
}

button {
  width: 100%;
  padding: 12px;
  margin-top: 15px;
  background: black;
  color: white;
  border: none;
}

button:disabled {
  background: #999;
}
</style>
</head>

<body>

<h3>แนบสลิป</h3>

<label for="slipUpload" class="upload-box">
  <span class="upload-text" id="uploadText">➕ กดที่นี่เพื่อแนบสลิป</span>
  <img id="previewImage" class="preview-image">
</label>

<input type="file" id="slipUpload" accept="image/*" hidden>

<button id="confirmBtn" onclick="confirmSlip()" disabled>ยืนยัน</button>

<script>
const slipInput = document.getElementById("slipUpload");
const previewImage = document.getElementById("previewImage");
const uploadText = document.getElementById("uploadText");
const confirmBtn = document.getElementById("confirmBtn");

slipInput.addEventListener("change", function () {
  const file = this.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = function (e) {
    previewImage.src = e.target.result;
    previewImage.style.display = "block";
    uploadText.style.display = "none";
    confirmBtn.disabled = false;
  };
  reader.readAsDataURL(file);
});

function confirmSlip() {
  if (!slipInput.files.length) {
    alert("กรุณาแนบสลิปก่อน");
    return;
  }

  const reader = new FileReader();
  reader.onload = function (e) {
    sessionStorage.setItem("slipData", e.target.result);
    window.location.replace("index.html");
  };
  reader.readAsDataURL(slipInput.files[0]);
}
</script>

</body>
</html>
